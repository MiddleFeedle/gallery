{"ast":null,"code":"export default class IndexedDbRepository {\n  constructor(keyPath) {}\n\n  initDb() {\n    let request = indexedDB.open('TestCollection', dbVersion);\n    console.log(request);\n\n    request.onerror = function (e) {\n      console.error('Unable to open database.');\n    };\n\n    request.onsuccess = function (e) {\n      db = e.target.result;\n      console.log(db);\n      console.log('db opened ' + db.name);\n      loadMainContent();\n    };\n\n    request.onupgradeneeded = function (e) {\n      let db = e.target.result;\n      console.log(db);\n      var objectStore = db.createObjectStore('Pictures', {\n        keyPath: 'id',\n        autoIncrement: true\n      });\n      objectStore.createIndex(\"format\", \"format\", {\n        unique: false\n      });\n      objectStore.createIndex(\"height\", \"height\", {\n        unique: false\n      });\n      objectStore.createIndex(\"size\", \"size\", {\n        unique: false\n      });\n      objectStore.createIndex(\"type\", \"type\", {\n        unique: false\n      });\n      objectStore.createIndex(\"date\", \"date\", {\n        unique: false\n      });\n      objectStore.createIndex(\"desc\", \"desc\", {\n        unique: false\n      });\n      objectStore.createIndex(\"tags\", \"tags\", {\n        unique: false\n      });\n      objectStore.createIndex(\"value\", \"value\", {\n        unique: false\n      });\n      dbReady = true;\n    };\n\n    return db;\n  }\n\n}","map":{"version":3,"sources":["C:/Users/middl/Desktop/DevIT project/devit-project/src/db/connection.js"],"names":["IndexedDbRepository","constructor","keyPath","initDb","request","indexedDB","open","dbVersion","console","log","onerror","e","error","onsuccess","db","target","result","name","loadMainContent","onupgradeneeded","objectStore","createObjectStore","autoIncrement","createIndex","unique","dbReady"],"mappings":"AAAA,eAAe,MAAMA,mBAAN,CAA0B;AACvCC,EAAAA,WAAW,CAAEC,OAAF,EAAqB,CAC/B;;AAEAC,EAAAA,MAAM,GAAG;AAER,QAAIC,OAAO,GAAGC,SAAS,CAACC,IAAV,CAAe,gBAAf,EAAiCC,SAAjC,CAAd;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;;AAEAA,IAAAA,OAAO,CAACM,OAAR,GAAkB,UAASC,CAAT,EAAY;AAC5BH,MAAAA,OAAO,CAACI,KAAR,CAAc,0BAAd;AACD,KAFD;;AAIAR,IAAAA,OAAO,CAACS,SAAR,GAAoB,UAASF,CAAT,EAAY;AAC9BG,MAAAA,EAAE,GAAGH,CAAC,CAACI,MAAF,CAASC,MAAd;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAYK,EAAZ;AAEAN,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAeK,EAAE,CAACG,IAA9B;AACAC,MAAAA,eAAe;AAChB,KAND;;AAQAd,IAAAA,OAAO,CAACe,eAAR,GAA0B,UAASR,CAAT,EAAY;AAChC,UAAIG,EAAE,GAAGH,CAAC,CAACI,MAAF,CAASC,MAAlB;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAYK,EAAZ;AAEA,UAAIM,WAAW,GAAGN,EAAE,CAACO,iBAAH,CAAqB,UAArB,EAAiC;AAACnB,QAAAA,OAAO,EAAC,IAAT;AAAeoB,QAAAA,aAAa,EAAE;AAA9B,OAAjC,CAAlB;AAEAF,MAAAA,WAAW,CAACG,WAAZ,CAAwB,QAAxB,EAAkC,QAAlC,EAA4C;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAA5C;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,QAAxB,EAAkC,QAAlC,EAA4C;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAA5C;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,MAAxB,EAAgC,MAAhC,EAAwC;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AACAJ,MAAAA,WAAW,CAACG,WAAZ,CAAwB,OAAxB,EAAiC,OAAjC,EAA0C;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAA1C;AACAC,MAAAA,OAAO,GAAG,IAAV;AACD,KAfL;;AAgBI,WAAOX,EAAP;AACD;;AAvCkC","sourcesContent":["export default class IndexedDbRepository {\r\n  constructor( keyPath : string ) {\r\n  }\r\n\r\n   initDb() {\r\n\r\n    let request = indexedDB.open('TestCollection', dbVersion);\r\n\r\n    console.log(request);\r\n\r\n    request.onerror = function(e) {\r\n      console.error('Unable to open database.');\r\n    }\r\n\r\n    request.onsuccess = function(e) {\r\n      db = e.target.result;\r\n      console.log(db);\r\n\r\n      console.log('db opened ' + db.name);\r\n      loadMainContent();\r\n    }\r\n\r\n    request.onupgradeneeded = function(e) {\r\n          let db = e.target.result;\r\n          console.log(db);\r\n\r\n          var objectStore = db.createObjectStore('Pictures', {keyPath:'id', autoIncrement: true});\r\n\r\n          objectStore.createIndex(\"format\", \"format\", { unique: false });\r\n          objectStore.createIndex(\"height\", \"height\", { unique: false });\r\n          objectStore.createIndex(\"size\", \"size\", { unique: false });\r\n          objectStore.createIndex(\"type\", \"type\", { unique: false });\r\n          objectStore.createIndex(\"date\", \"date\", { unique: false });\r\n          objectStore.createIndex(\"desc\", \"desc\", { unique: false });\r\n          objectStore.createIndex(\"tags\", \"tags\", { unique: false });\r\n          objectStore.createIndex(\"value\", \"value\", { unique: false });\r\n          dbReady = true;\r\n        }\r\n        return db;\r\n      }\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}