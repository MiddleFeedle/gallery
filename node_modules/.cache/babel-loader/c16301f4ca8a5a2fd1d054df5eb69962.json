{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\middl\\\\Desktop\\\\DevIT project\\\\devit-project\\\\src\\\\pages\\\\home.js\";\nimport React from 'react';\nimport './home.css';\nimport IndexedDbRepository from '../db/connection';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePicUpload = e => {\n      const value = e.target.value;\n      this.setState({\n        img: e.target.files[0]\n      });\n    };\n\n    this.state = {\n      postinfo: [],\n      urls: [],\n      img: null\n    };\n    this.uploadpicture = this.uploadpicture.bind(this);\n    this.handlePicUpload = this.handlePicUpload.bind(this);\n    var db, dbtest;\n    let uploadingPicture = {\n      name: null,\n      format: null,\n      width: null,\n      height: null,\n      size: null,\n      type: null,\n      date: null,\n      desc: \"test\",\n      tags: \"котики тест проверка\",\n      value: null\n    };\n  }\n\n  componentDidMount() {\n    this.dbtest = new IndexedDbRepository('Storage');\n    this.db = this.dbtest._openDatabase('Storage');\n    console.log(this.db);\n  }\n\n  uploadpicture() {\n    //  let uploadingPicture.date = new Date();\n    alert(this.db);\n    let file = this.state.img;\n    alert(file);\n    var reader = new FileReader();\n    reader.readAsBinaryString(file);\n\n    reader.onload = function (e) {\n      //alert(e.target.result);\n      let bits = e.target.result; // uploadingPicture.value = bits;\n\n      let ob = bits;\n      let trans = this.db.transaction(['Pictures'], 'readwrite');\n      let addReq = trans.objectStore('Pictures').add(ob);\n\n      addReq.onerror = function (e) {\n        console.log('error storing data');\n        console.error(e);\n      };\n\n      trans.oncomplete = function (e) {\n        console.log('data stored');\n      };\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 1\n      }\n    }, \"Simple gallery pure css\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-all\",\n      id: \"maincontent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 1\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      id: \"articleimg\",\n      class: \"\",\n      accept: \".png,.jpg\",\n      onChange: this.handlePicUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.uploadpicture,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 1\n      }\n    }, \"  \\u0410\\u043A\\u0442\\u0438\\u0432\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043B\\u0430\\u0437\\u0435\\u0440\\u044B\"));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/middl/Desktop/DevIT project/devit-project/src/pages/home.js"],"names":["React","IndexedDbRepository","Home","Component","constructor","props","handlePicUpload","e","value","target","setState","img","files","state","postinfo","urls","uploadpicture","bind","db","dbtest","uploadingPicture","name","format","width","height","size","type","date","desc","tags","componentDidMount","_openDatabase","console","log","alert","file","reader","FileReader","readAsBinaryString","onload","bits","result","ob","trans","transaction","addReq","objectStore","add","onerror","error","oncomplete","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './home.css';\r\n\r\nimport IndexedDbRepository from '../db/connection';\r\n\r\n\r\nclass Home extends React.Component\r\n\r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      postinfo: [],\r\n      urls: [],\r\n      img: null,\r\n    };\r\n\r\n    this.uploadpicture = this.uploadpicture.bind(this);\r\n    this.handlePicUpload = this.handlePicUpload.bind(this);\r\n\r\n    var db, dbtest;\r\n\r\n    let uploadingPicture =\r\n{\r\n\r\n    name: null,\r\n    format: null,\r\n    width: null,\r\n    height: null,\r\n    size: null,\r\n    type: null,\r\n    date: null,\r\n    desc: \"test\",\r\n    tags: \"котики тест проверка\",\r\n    value: null\r\n}\r\n\r\n  }\r\n\r\n\r\n\r\n  handlePicUpload = (e) => {\r\n  const value = e.target.value;\r\n  this.setState({img: e.target.files[0]});\r\n}\r\n\r\n\r\n  componentDidMount() {\r\n\r\n    this.dbtest = new IndexedDbRepository( 'Storage' );\r\n    this.db = this.dbtest._openDatabase( 'Storage'  );\r\n\r\n    console.log(this.db);\r\n    }\r\n\r\n\r\n    uploadpicture()\r\n    {\r\n    //  let uploadingPicture.date = new Date();\r\n\r\n    alert(this.db);\r\n\r\n\t\t  \tlet file = this.state.img;\r\n        alert(file);\r\n\r\n\t\t\t\tvar reader = new FileReader();\r\n\r\n\t\t\t\treader.readAsBinaryString(file);\r\n\r\n\t\t\t\treader.onload = function(e) {\r\n\t\t\t\t\t//alert(e.target.result);\r\n\t\t\t\t\tlet bits = e.target.result;\r\n        // uploadingPicture.value = bits;\r\n\r\n\r\n\t\t\t\t\tlet ob = bits;\r\n\r\n\t\t\t\t\tlet trans = this.db.transaction(['Pictures'], 'readwrite');\r\n\t\t\t\t\tlet addReq = trans.objectStore('Pictures').add(ob);\r\n\r\n\t\t\t\t\taddReq.onerror = function(e) {\r\n\t\t\t\t\t\tconsole.log('error storing data');\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttrans.oncomplete = function(e) {\r\n\t\t\t\t\t\tconsole.log('data stored');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n    }\r\n\r\n\r\n  render() {\r\n\r\n\r\n\r\n  return(\r\n\r\n<div>\r\n\r\n<h1>Simple gallery pure css</h1>\r\n\r\n<div className=\"container-all\" id = \"maincontent\">\r\n\r\n</div>\r\n\r\n<div>\r\n    <input type=\"file\" name=\"image\" id=\"articleimg\" class=\"\" accept=\".png,.jpg\" onChange={this.handlePicUpload}/>\r\n</div>\r\n\r\n<button onClick={this.uploadpicture}>  Активировать лазеры\r\n\r\n</button>\r\n\r\n\r\n\r\n</div>\r\n\r\n);\r\n}\r\n\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}